import*as React from'react';export default function useDevTools(_ref){var name=_ref.name,reset=_ref.reset,state=_ref.state;var devToolsRef=React.useRef();if(process.env.NODE_ENV!=='production'&&global.__REDUX_DEVTOOLS_EXTENSION__&&devToolsRef.current===undefined){devToolsRef.current=global.__REDUX_DEVTOOLS_EXTENSION__.connect({name:name});}var devTools=devToolsRef.current;var lastStateRef=React.useRef(state);var actions=React.useRef([]);React.useEffect(function(){devTools==null?void 0:devTools.init(lastStateRef.current);},[devTools]);React.useEffect(function(){return devTools==null?void 0:devTools.subscribe(function(message){if(message.type==='DISPATCH'&&message.state){reset(JSON.parse(message.state));}});},[devTools,reset]);var trackState=React.useCallback(function(getState){if(!devTools){return;}while(actions.current.length>1){devTools.send(actions.current.shift(),lastStateRef.current);}var state=getState();if(actions.current.length){devTools.send(actions.current.pop(),state);}else{devTools.send('@@UNKNOWN',state);}lastStateRef.current=state;},[devTools]);var trackAction=React.useCallback(function(action){if(!devTools){return;}actions.current.push(action);},[devTools]);return{trackAction:trackAction,trackState:trackState};}
//# sourceMappingURL=useDevTools.js.map