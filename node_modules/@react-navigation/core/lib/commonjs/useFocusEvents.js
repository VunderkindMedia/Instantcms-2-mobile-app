var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=useFocusEvents;var React=_interopRequireWildcard(require("react"));var _NavigationContext=_interopRequireDefault(require("./NavigationContext"));function useFocusEvents(_ref){var state=_ref.state,emitter=_ref.emitter;var navigation=React.useContext(_NavigationContext.default);var lastFocusedKeyRef=React.useRef();var currentFocusedKey=state.routes[state.index].key;React.useEffect(function(){return navigation==null?void 0:navigation.addListener('focus',function(){return emitter.emit({type:'focus',target:currentFocusedKey});});},[currentFocusedKey,emitter,navigation]);React.useEffect(function(){return navigation==null?void 0:navigation.addListener('blur',function(){return emitter.emit({type:'blur',target:currentFocusedKey});});},[currentFocusedKey,emitter,navigation]);React.useEffect(function(){var lastFocusedKey=lastFocusedKeyRef.current;lastFocusedKeyRef.current=currentFocusedKey;if(lastFocusedKey===undefined&&!navigation){emitter.emit({type:'focus',target:currentFocusedKey});}if(lastFocusedKey===currentFocusedKey||!(navigation?navigation.isFocused():true)){return;}if(lastFocusedKey===undefined){return;}emitter.emit({type:'focus',target:currentFocusedKey});emitter.emit({type:'blur',target:lastFocusedKey});},[currentFocusedKey,emitter,navigation]);}
//# sourceMappingURL=useFocusEvents.js.map